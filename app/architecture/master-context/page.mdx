export const metadata = {
  title: 'AICodeRally Master Context',
  description: 'Single source of truth for Studio, Edge, Summit structure and new project creation.',
}

# AICodeRally Master Context

*Studio · Edge · Summit · AI · Repo Map*

This is the **single source of truth** for how AICodeRally is structured and where new projects live.

> Canonical source: [`AICodeRally_Master_Context.md`](https://github.com/AICodeRally/aicoderally-stack/blob/master/AICodeRally_Master_Context.md) in the monorepo root.

---

## 0. Quick Use

When you want to create a **new Studio, Edge, or Summit project**, you will:

1. Work in the **`aicoderally-stack` monorepo**.
2. Add a **project folder** under `projects/` (not a new app repo).
3. Let the tier shell render it:
   - Studio → `apps/studio`
   - Edge → `apps/edge`
   - Summit → `apps/summit`
4. Configure modules/solutions and copy/branding inside that project folder.
5. Keep shared logic in `packages/*` and shared knowledge in `knowledge/*`.

---

## 1. Tiers: Studio vs Edge vs Summit

- **Studio** – experiences, programs, workshops, cohorts.
- **Edge** – run-the-business portals (front/back office, product ops).
- **Summit** – governance/control tower across studios/edges.

---

## 2. Repo Structure (Real Mental Map)

The stack uses **multi-tenant tier apps** plus **project folders** and **shared packages**.

```text
aicoderally-stack/
  apps/
    website/        # Main platform & admin
    studio/         # Studio tier shell (all Studio projects)
    edge/           # Edge tier shell (all Edge projects)
    summit/         # Summit tier shell (all Summit projects)
    docs/           # Documentation site
    mobile/         # Mobile app

  packages/
    core/           # Core AI + orchestration
    db/             # Prisma + DB
    ui/             # Shared UI components
    modules/        # 70+ reusable feature modules
    connectors/     # Email, DB, AI connectors
    solutions/      # Pre-built solution bundles / verticals

  projects/
    birthday-app-studio/  # Studio pilot
    tacofinder-edge/      # Edge pilot
    ...                   # New Studio/Edge/Summit projects live here

  knowledge/
    ai/
    architecture/
    methodology/
    operations/
    prompt-library/
    tasks/
    ...                   # 20+ categories, shared across stack

  .ai/
    cross-commss/  # agent wiring (SYSTEM/tasks/cross-comms)
    tasks/
    ...            # can extend with .ai/projects for per-project briefs

  prisma/
    schema.prisma
    migrations/

  tools/
    agents/        # iTerm2 agent profiles + scripts
    python/
    rally-ai/
    rally-rag/
    terminal-bridge/
    scripts/       # includes create-studio-project.sh

  docs/, roadmap/, scripts/, archive/, etc.
```

Principle: `apps/` = shells; `packages/` = engine; `projects/` = instances; `knowledge/` = shared KB; `.ai/` = AI orchestration.

---

## 3. Creating New Studio / Edge / Summit Projects

In this stack, a **project** is a folder under `projects/` that is rendered by one of the tier apps.

- Studio → `projects/<slug>-studio/` used by `apps/studio`
- Edge → `projects/<slug>-edge/` used by `apps/edge`
- Summit → `projects/<slug>-summit/` used by `apps/summit`

The heavy lifting lives in `apps/*` and `packages/*`. Project folders are mostly **config + glue**, not standalone apps.

### 3.1 New Studio Project (scaffolder)

```bash
cd aicoderally-stack
./tools/scripts/create-studio-project.sh
```

The script asks for slug/name, creates `projects/<slug>-studio/`, and seeds config for `apps/studio` (project id/slug, modules to enable, copy/branding overrides).

Result: `projects/<slug>-studio/` + `apps/studio` shell + `packages/*` features.

### 3.2 New Edge Project (template for now)

Copy the Edge pilot:

```bash
cd aicoderally-stack
cp -R projects/tacofinder-edge projects/<slug>-edge
```

Update slug/name/config; ensure `apps/edge` imports the new project registry/entry.

Result: `projects/<slug>-edge/` + `apps/edge` shell + `packages/*` engine.

Future: add `tools/scripts/create-edge-project.sh`.

### 3.3 New Summit Project

Same pattern:

```bash
cd aicoderally-stack
cp -R projects/tacofinder-edge projects/<slug>-summit
```

Adjust for Summit semantics (governance, cross-project views) and wire into `apps/summit`.

Future: add `tools/scripts/create-summit-project.sh`.

### 3.4 Project Index

Keep `knowledge/technical/PROJECT_INDEX.md` updated with Tier, Name, Slug, `projects/` path, tier app, status.

---

## 4. AI, .ai Folder, and RAG

- `.ai/` holds SYSTEM, tasks, cross-comms.
- If adding `.ai/projects/`, mirror `projects/<slug>-tier/` and link RAG sources.
- RAG sources are shared under `knowledge/` (no per-tier folders).

---

## 5. Domains & Deployment Conventions

Baseline subdomains (multi-tenant):
- Studio: `studio.aicoderally.com`
- Edge: `edge.aicoderally.com`
- Summit: `summit.aicoderally.com`

Document actual mappings in `knowledge/technical/DOMAINS_AND_APPS.md`.

---

## 6. Legacy Repos & Prototypes

Treat old repos/folders as reference only. If reviving something, migrate into:
- `apps/studio|edge|summit` (shell)
- `projects/<slug>-tier/` (instance)
- `knowledge/` for docs
- optional `.ai/projects/` brief for agents

---

## 7. Where to Look First

1) This page / master doc. 2) `apps/` shells. 3) `projects/` roster. 4) `packages/` engine. 5) `knowledge/` for context. 6) `.ai/` for agent wiring.

Short answer: **Keep the current multi-tenant tier apps + projects model; the old per-project app/verticals model is deprecated.**

export const metadata = {
  title: 'Module Architecture & Classification: Building Reusable Capabilities',
  description: 'How AICodeRally organizes 130+ reusable modules, the Module vs. App distinction, and composition patterns for building complex applications'
}

# Module Architecture & Classification

**Last Updated:** 2025-12-03

AICodeRally uses a modular architecture to organize 130+ reusable capabilities. This guide explains how modules work, how they differ from full applications, and how to build with them.

## What is a Module?

**A Module is a reusable capability.** It's a self-contained piece of functionality that can be:
- Shared across multiple applications
- Combined with other modules
- Customized for specific use cases
- Built once, used many times

**Examples:**
- `accounting` - Financial calculations and tracking
- `approval-workflows` - Configurable approval processes
- `analytics-tools` - Data analysis and visualization
- `user-management` - User lifecycle management

---

## Module vs. Application: Key Distinction

**Use This Decision Tree:**

```mermaid
graph TD
    A["Does this solve ONE<br/>specific problem?<br/>e.g., 'track time'"]
    B["âœ… It's a Module<br/>Reusable capability<br/>Location: packages/modules/"]
    C["Does it combine<br/>multiple capabilities<br/>in a specific way?"]
    D["âœ… It's an App<br/>Complete experience<br/>Location: apps/studio/"]
    E["It's a Library<br/>or Component<br/>Location: packages/"]

    A -->|"YES"| B
    A -->|"NO"| C
    C -->|"YES"| D
    C -->|"NO"| E

    style A fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style B fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px
    style C fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style D fill:#bbdefb,stroke:#1565c0,stroke-width:2px
    style E fill:#f8bbd0,stroke:#c2185b,stroke-width:2px
```

### Module Characteristics âœ…

**What makes something a Module:**

| Criteria | Module | App |
|----------|--------|-----|
| **Solves one problem** | âœ… Yes | âŒ No (solves many) |
| **Reusable in multiple contexts** | âœ… Yes | âŒ Not typically |
| **Configuration, not hardcoding** | âœ… Yes | âŒ Often hardcoded |
| **Location** | `packages/modules/` | `apps/studio/` |
| **Shared in monorepo** | âœ… Yes | âŒ Specific app |
| **Multiple implementations** | âœ… Yes (variations) | âŒ One way |

### Application Characteristics ğŸ¯

**What makes something an App:**

- Combines multiple modules/capabilities
- Specific user experience (UI, flows, pages)
- Dedicated purpose (e.g., "Sales Dashboard")
- Single implementation (not variations)
- Not reused elsewhere

**Example Studio App: "Birthday Party Planner"**
```
Uses These Modules:
â”œâ”€ planning (core capability)
â”œâ”€ calendar-management
â”œâ”€ vendor-discovery
â”œâ”€ payment-processing
â”œâ”€ notifications
â””â”€ reporting

Result: Specialized app, not reusable elsewhere
```

---

## Module Classification System

All 130+ modules are classified into categories:

### Classification Categories

#### ğŸ”§ Core Modules (Keep & Reuse)
**103 core modules** - True reusable capabilities

**Characteristics:**
- Solves specific problem
- Used by multiple features
- Configurable and adaptable
- Location: `packages/modules/`

**Examples:**
- `approval-workflows` - Configurable approval processes
- `analytics-tools` - Data analysis
- `budget-management` - Budgeting system
- `dashboard-builder` - Customizable dashboards
- `email-marketing` - Campaign management
- `user-management` - User lifecycle

**Action:** Keep and prioritize

#### ğŸ¨ Studio Apps (Migrate to apps/studio/)
**15 studio apps** - Full application experiences

**Characteristics:**
- Complete UI/UX
- Specific use case
- Not shared with other apps
- Full app bundle

**Examples:**
- `birthday-party-planner` - Plan parties
- `restaurant-weekly-menu-planner` - Menu planning
- `translation-app` - Language translation
- `future-builders` - Career planning
- `startup-forge` - Business planning

**Action:** Migrate from `packages/modules/` to `apps/studio/`

#### âš ï¸ Edge-Portal Only
**Tier-specific features**

**Characteristics:**
- Only used in Edge portal
- Tier-specific UI
- Not shared in core modules

**Examples:**
- `ai-assistant-edge` - Edge tier AI
- Features specific to Edge tier

**Action:** Keep separate, don't export to shared modules

#### ğŸ—‚ï¸ Legacy (Review & Consolidate)
**Requires review**

**Examples:**
- `taco-tracker-scoping` - Potential duplicate of `scoping`

**Action:** Audit for duplication, consolidate if needed

---

## Module Composition Patterns

**How modules combine to build features:**

### Pattern 1: Simple Addition

```mermaid
graph LR
    A["ğŸ“Š Dashboard<br/>Builder"] --> C["ğŸ¨ Feature<br/>Dashboard"]
    B["ğŸ“ˆ Analytics<br/>Tools"] --> C
    D["ğŸ“„ Reporting<br/>Engine"] --> C
```

**Example:** Performance Dashboard combines UI + data analysis + export

### Pattern 2: Conditional Composition

```mermaid
graph TD
    A["ğŸ“… Project<br/>Tracker<br/>Core"] --> B{Premium?}
    B -->|NO| C["ğŸ“… Basic Tracker"]
    B -->|YES| D["ğŸ¤– AI Assistant"]
    D --> E["ğŸ“… Advanced Tracker"]
```

**Example:** Basic vs. Premium project tracking with optional AI

### Pattern 3: Deep Composition (TACO Tracker Scope Example)

```mermaid
graph TD
    A["ğŸ¯ TACO Scope<br/>Feature"]
    B["ğŸ”§ Scoping Tool"]
    C["ğŸ“Š Analysis Tools"]
    D["ğŸ“ˆ Dashboard Builder"]
    E["ğŸ“„ Reports Engine"]
    F["âœ… Approvals Workflow"]

    A --> B
    A --> C
    A --> D
    A --> E
    A --> F

    style A fill:#fff3e0,stroke:#e65100,stroke-width:3px
    style B fill:#bbdefb,stroke:#1565c0,stroke-width:2px
    style C fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px
    style D fill:#f8bbd0,stroke:#c2185b,stroke-width:2px
    style E fill:#b2dfdb,stroke:#00695c,stroke-width:2px
    style F fill:#ffe0b2,stroke:#e65100,stroke-width:2px
```

**Example:** Scoping app combines 5+ modules for complete experience

### Real Example: TACO Tracker Scope

```
taco-tracker-scoping combines:
â”œâ”€ scoping-tool (core capability)
â”œâ”€ analysis-tools (data analysis)
â”œâ”€ dashboard-builder (UI)
â”œâ”€ reporting-engine (exports)
â””â”€ approval-workflows (approval gates)

Result: Complete scoping application
```

---

## Studio App Registry Integration

**How Studio apps reference modules:**

```
apps/studio/lib/apps.ts (Registry)
â”œâ”€ birthday-party-planner
â”‚  â””â”€ uses: planning, calendar, vendors
â”œâ”€ restaurant-menu-planner
â”‚  â””â”€ uses: content-calendar, vendor-discovery
â”œâ”€ future-builders
â”‚  â””â”€ uses: project-tracker, goal-setting
â””â”€ [20+ other studio apps]
```

Each Studio app:
1. Declares module dependencies
2. Gets auto-linked in Studio portal
3. Uses consistent UI/UX patterns
4. Shares common infrastructure

---

## Module Organization

**How modules are organized in monorepo:**

```
packages/modules/
â”œâ”€â”€ accounting/                 # Financial capability
â”œâ”€â”€ approval-workflows/         # Workflow capability
â”œâ”€â”€ asset-library/              # Asset management
â”œâ”€â”€ ...
â””â”€â”€ user-management/            # User management
    â”œâ”€â”€ components/
    â”œâ”€â”€ hooks/
    â”œâ”€â”€ types.ts
    â”œâ”€â”€ index.ts
    â””â”€â”€ package.json
```

**Standard Module Structure:**

```
module-name/
â”œâ”€â”€ components/        # Reusable React components
â”œâ”€â”€ hooks/            # Custom React hooks
â”œâ”€â”€ types.ts          # TypeScript types
â”œâ”€â”€ index.ts          # Public API export
â”œâ”€â”€ README.md         # Documentation
â””â”€â”€ package.json      # Module metadata
```

---

## Tier-Specific Modules

**Modules can be tier-specific:**

```
Core Modules (Available in all tiers)
â”œâ”€ user-management
â”œâ”€ analytics-tools
â”œâ”€ reporting-engine
â””â”€ [most modules]

Studio Tier
â”œâ”€ All core modules
â”œâ”€ Studio-specific UI
â””â”€ Simplified versions

Edge Tier
â”œâ”€ All core modules
â”œâ”€ Advanced features
â”œâ”€ Multi-user support
â””â”€ ai-assistant-edge

Summit Tier
â”œâ”€ All core modules
â”œâ”€ Enterprise features
â”œâ”€ Custom integrations
â”œâ”€ Advanced governance
â””â”€ Full customization
```

---

## Module Statistics

**Current Module Inventory (130 total):**

| Type | Count | Status |
|------|-------|--------|
| Core Modules | 103 | âœ… Keep |
| Studio Apps | 15 | ğŸ”„ Migrate |
| Edge Tier Only | 5 | âš ï¸ Review |
| Legacy | 7 | ğŸ—‚ï¸ Consolidate |
| **TOTAL** | **130** | â€” |

### Coverage by Category

**Most Implemented Categories:**
- Financial: 8 modules (accounting, invoicing, budgets, etc.)
- Project Management: 7 modules (tracking, planning, etc.)
- User Management: 5 modules
- Analytics: 6 modules
- Workflow: 4 modules
- Content: 5 modules

---

## Best Practices

### When Creating a New Module âœ…

1. **Solves one problem clearly** - Can you describe it in one sentence?
2. **Reusable in multiple contexts** - Could 2+ apps use it?
3. **Configurable** - Not hardcoded for one use case?
4. **Well-documented** - README with examples?
5. **Exported properly** - Clear public API in index.ts?

### When Creating a Studio App ğŸ¯

1. **Combines multiple modules** - Uses 2+ modules?
2. **Specific use case** - Solves a particular problem?
3. **Complete experience** - UI, workflow, result?
4. **Located correctly** - In apps/studio/?
5. **Registered** - Listed in apps/studio/lib/apps.ts?

### Common Mistakes âŒ

1. **Module does too much** - Combine multiple capabilities
2. **App is not reusable** - Created as module when it's an app
3. **Hardcoded for one use** - Module should be configurable
4. **No clear exports** - Unclear public API
5. **Tier-specific logic mixed in** - Should be at app level

---

## Module Consolidation Strategy

**Moving forward:**

```
Phase 1: Audit
â”œâ”€ Review 15 misclassified studio apps
â”œâ”€ Check 7 legacy modules
â””â”€ Identify 3-5 duplicate capabilities

Phase 2: Migrate
â”œâ”€ Move studio apps to apps/studio/
â”œâ”€ Consolidate duplicates
â”œâ”€ Update registry

Phase 3: Optimize
â”œâ”€ 120+ core modules
â”œâ”€ Clear composition patterns
â”œâ”€ Reusable and maintainable
```

---

## Using Modules in Your App

**Importing a Module:**

```typescript
// app/components/MyFeature.tsx
import { AccountingDashboard } from '@rally/modules/accounting';
import { ApprovalWorkflow } from '@rally/modules/approval-workflows';

export function MyFeature() {
  return (
    <div>
      <ApprovalWorkflow
        steps={workflowSteps}
        onApprove={handleApprove}
      />
      <AccountingDashboard
        data={financialData}
        tier="summit"
      />
    </div>
  );
}
```

**Composing Modules:**

```typescript
// Build a custom dashboard
const Dashboard = () => {
  const [data, setData] = useState(null);

  return (
    <Layout>
      <AnalyticsTools data={data} />
      <ReportsEngine export={true} />
      <DashboardBuilder customize={true} />
    </Layout>
  );
};
```

---

## Related Documentation

- [Getting Started](/getting-started) - Initial setup
- [Modules Overview](/modules) - Module system
- [Architecture Overview](/architecture/unified) - System context
- [Development Guide](/development) - Building with modules
